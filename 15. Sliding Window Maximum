from collections import deque

def max_sliding_window(nums,k):
    q=deque()
    res=[]
    for i,n in enumerate(nums):
        while q and q[0]<=i-k:
            q.popleft()
        while q and nums[q[-1]]<n:
            q.pop()
        q.append(i)
        if i>=k-1:
            res.append(nums[q[0]])
    return res

print(max_sliding_window([1,3,-1,-3,5,3,6,7],3))
