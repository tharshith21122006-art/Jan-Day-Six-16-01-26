def trap(height):
    if not height: return 0
    left,right=0,len(height)-1
    lmax,rmax=height[left],height[right]
    water=0
    while left<right:
        if lmax<rmax:
            left+=1
            lmax=max(lmax,height[left])
            water+=lmax-height[left]
        else:
            right-=1
            rmax=max(rmax,height[right])
            water+=rmax-height[right]
    return water

print(trap([0,1,0,2,1,0,1,3,2,1,2,1]))
